import mongoose from 'mongoose';
import slug from 'mongoose-slug-generator';
import mongooseDelete from 'mongoose-delete';

const { Schema } = mongoose;
mongoose.plugin(slug);

const Promo = new Schema(
    {
        name: {type: 'string', required: true},
        image: {type: 'string', default: 'data:image/jpeg;base64,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'},
        discountPercentage: {type: Number, min: 0, max: 100, default: 0},
        discountAmount: {type: Number, min: 0, default: 0},
        condition: {type: Number, required: true, min: 0, default: 0},
        limitEachDay: {type: Number, min: 1, default: 1},
        description: {type: 'string', required: true},
        meta: {
            votes: {type: Number, default: 0},
            favs: {type: Number, default: 0}
        },
        expirationDate: {type: Date, required: true},   
    },
    {
        timestamps: true
    }
)

Promo.plugin(mongooseDelete, {
    deletedAt: true,
    overrideMethods: 'all'
})

export default mongoose.model('Promo', Promo)