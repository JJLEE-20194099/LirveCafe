<!--Carousel Wrapper-->

<div id="home-slider">

  <div id="carousel-example-1z" class="carousel slide carousel-fade" data-ride="carousel">
    <!--Indicators-->
    <ol class="carousel-indicators">
      <li data-target="#carousel-example-1z" data-slide-to="0" class="active"></li>
      <li data-target="#carousel-example-1z" data-slide-to="1"></li>
      <li data-target="#carousel-example-1z" data-slide-to="2"></li>
    </ol>
    <!--/.Indicators-->
    <!--Slides-->

    <div class="carousel-inner" role="listbox">
      <!--First slide-->
      <div class="carousel-item active">
        <img class="d-block w-100" src="/img/yasuo.jpg" alt="First slide">
      </div>
      <!--/First slide-->
      <!--Second slide-->
      <div class="carousel-item">
        <img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Slides/img%20(129).jpg" alt="Second slide">
      </div>
      <!--/Second slide-->
      <!--Third slide-->
      <div class="carousel-item">
        <img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Slides/img%20(70).jpg" alt="Third slide">
      </div>
      <!--/Third slide-->
    </div>
    <!--/.Slides-->
    <!--Controls-->
    <a class="carousel-control-prev" href="#carousel-example-1z" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carousel-example-1z" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
    <!--/.Controls-->
  </div>
  <!--/.Carousel Wrapper-->
</div>



{{!-- home books --}}
<div class="home-product" id="home-books">

  <div class="product-header" id="books-header">
    <span>Các tựa sách hot</span>
  </div>

  <div class="carousel slide" data-ride="carousel" data-interval="5000">

    <div class="carousel-inner row w-100 mx-auto" role="listbox">

      {{!-- book list --}}
      {{#each books}}
        <a href="/books/{{this.slug}}" class="carousel-item col-md-3">

          <div class="panel panel-default">
            <div class="panel-thumbnail">
              <div title="{{this.title}}" class="thumb">
                <img class="img-fluid mx-auto d-block" src="{{this.image}}" alt="slide 1">
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-body">
              <h5 class="card-title">{{this.title}}</h5>

              <p class="card-text">{{this.description}}</p>

            </div>
          </div>

        </a>
      {{/each}}

      

    {{!-- book prev icon --}}
    <button style="display: inline-block" class="carousel-control-prev" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </button>
    {{!-- book next icon --}}
    <button style="display: inline-block" class="carousel-control-next text-faded" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </button>
  </div>

</div>


{{!-- home drink --}}

<div class="home-product" id="home-drinks">

  <div class="product-header" id="books-header">
    <span>Coffee và hơn thế</span>
  </div>

  <div class="carousel slide" data-ride="carousel" data-interval="5000">

    <div class="carousel-inner row w-100 mx-auto" role="listbox">

      {{!-- drink item1 --}}
     {{#each coffee}}
         <div class="carousel-item col-md-3">

        <div class="panel panel-default">
          <div class="panel-thumbnail">
            <a href="/coffee/{{this.slug}}" title="{{this.name}}" class="thumb">
              <img class="img-fluid mx-auto d-block" src="{{this.image}}" alt="slide 1">
            </a>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <h5 class="card-title">{{this.title}}</h5>

            <p class="card-text">{{this.description}}</p>

          </div>
        </div>

      </div>
     {{/each}}

    </div>
    {{!-- coffee prev icon --}}
    <a class="carousel-control-prev" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    {{!-- coffee next icon --}}
    <a class="carousel-control-next text-faded" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

</div>


{{!-- home image --}}
<div id="home-image">

</div>


<script>
  const $ = document.querySelector.bind(document);
  const $$ = document.querySelectorAll.bind(document);
  const sliderItems = $$('#ad-slider .carousel-item ')
  const prevSliderIcon = $('#ad-slider .carousel-control-prev')
  const nextSliderIcon = $('#ad-slider .carousel-control-next')
  const bookItems = $$('#home-books .carousel-item')
  const prevbookIcon = $('#home-books .carousel-control-prev')
  const nextbookIcon = $('#home-books .carousel-control-next')
  const drinkItems = $$('#home-drinks .carousel-item')
  const prevdrinkIcon = $('#home-drinks .carousel-control-prev')
  const nextdrinkIcon = $('#home-drinks .carousel-control-next')

  document.querySelector('#home-books .carousel-item').classList.add('active')
  if (document.querySelector('#home-drinks .carousel-item'))

    document.querySelector('#home-drinks .carousel-item').classList.add('active')

  function prevIconClick(items) {
    var activeIndex;
    var activeE;
    items.forEach(function (item, index) {
      if (item.classList.contains('active')) {
        activeE = item;
      }
    })
    items.forEach(function (item, index) {
      if (item === activeE) {
        activeIndex = index;
      }
    })
    activeE.classList.remove('active');
    
    items[(activeIndex - 1 + items.length) % item.length].classList.add('active');
  }
  function nextIconClick(items) {
    var activeIndex;
    var activeE;
    items.forEach(function (item, index) {
      if (item.classList.contains('active')) {
        activeE = item;
      }
    })
    items.forEach(function (item, index) {
      if (item === activeE) {
        activeIndex = index;
      }
    })
    activeE.classList.remove('active');
    items[(activeIndex + 1) % items.length].classList.add('active');
    
  }
  prevbookIcon.onclick = function () {
    prevIconClick(bookItems);
  }
  nextbookIcon.onclick = function () {
    nextIconClick(bookItems);
  }
  prevdrinkIcon.onclick = function () {
    prevIconClick(drinkItems);
  }
  nextdrinkIcon.onclick = function () {
    nextIconClick(drinkItems);
  }
</script>